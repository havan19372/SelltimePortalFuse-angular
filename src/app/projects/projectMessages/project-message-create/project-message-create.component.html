<div class="dialog-content-wrapper">
  <mat-toolbar matDialogTitle class="mat-accent m-0">
    <div fxFlex fxLayout="row wrap" fxLayoutAlign="space-between center">
      <span class="title dialog-title">New Message</span>
      <button mat-button class="mat-icon-button" (click)="dialogRef.close()" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </mat-toolbar>

  <div mat-dialog-content class="p-24 m-0" fusePerfectScrollbar  *blockUI=" 'projectCreateBlock' ">

    <form name="projectMessageForm" [formGroup]="projectMessageForm" class="compose-form" fxLayout="column" fxFlex>

      <mat-form-field>
        <textarea matInput name="detail" placeholder="Message Detail" formControlName="detail" rows="6">
        </textarea>
      </mat-form-field>

      <div class="attachment-list">

        <div class="attachment" fxLayout="row wrap" fxLayoutAlign="space-between center" *ngFor="let image of projectMessage.attachments">

          <div>
            <span class="filename">{{ image.attachmentId }}</span>
            <!-- <span class="size">(12 Kb)</span> -->
          </div>

          <button mat-icon-button aria-label="Delete attachment" (click)="deleteAttach(image)">
            <mat-icon class="s-16">close</mat-icon>
          </button>

        </div>

      </div>

    </form>
  </div>

  <div mat-dialog-actions class="m-0 p-16" fxLayout="row wrap" fxLayoutAlign="space-between center">

    <div>

      <button mat-raised-button (click)="dialogRef.close(['add',projectMessageForm])" *ngIf="action === 'add' " class="save-button mat-accent" [disabled]="projectMessageForm.invalid"
        aria-label="SAVE">
        Save
      </button>

      <button mat-raised-button (click)="dialogRef.close(['edit',projectMessageForm])" *ngIf="action === 'edit' " class="save-button mat-accent" [disabled]="projectMessageForm.invalid"
        aria-label="SAVE">
        Edit
      </button>
      <input hidden type="file" (change)="uploadFile($event)" multiple #fileInput/>


      <input hidden type="file" (change)="onChange($event)" multiple #fileInput/>
      <button mat-icon-button matTooltip="Attach a file" (click)="fileInput.click()" aria-label="Add file">
        <mat-icon>attach_file</mat-icon>
      </button>


    </div>

    <button mat-button class="mat-icon-button" (click)="dialogRef.close(['delete',projectMessageForm])" aria-label="Delete" matTooltip="Delete">
      <mat-icon>delete</mat-icon>
    </button>

  </div>

</div>
